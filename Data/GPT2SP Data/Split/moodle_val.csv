Issue,Storypoint
"prevent error log output from addodb during phpunit execution
The problem is in native mssql driver which turns on the logging by default, instead of hacking adodb we can just silence it during tests...    This is caused by the following code in native ms sql driver in adodb:  sqlsrv_log_set_subsystems(SQLSRV_LOG_SYSTEM_ALL);",4
"incorrect code for updates of login times
during event migration the code updating user login times got borked - he $USER->timemodified and db state get out of sync; it is also painfully slow...    {code}  core_moodlelib_testcase::test_complete_user_login  Time is lower that allowed start value  Failed asserting that '1390980862' is equal to 1390980863 or is greater than 1390980863.  /home/jerome/moodles/integration_master_mysqli/moodle/lib/phpunit/classes/advanced_testcase.php:393  /home/jerome/moodles/integration_master_mysqli/moodle/lib/tests/moodlelib_test.php:2473  /home/jerome/moodles/integration_master_mysqli/moodle/lib/phpunit/classes/advanced_testcase.php:80  {code}    At the same time this code triggers extra user updated event right before user logged in event which is also not correct.",4
"Behat - add an option to take page dumps
Handy when you're trying to track down an issue with xpaths:  * set behat_contentdump_path  * run your failing test  * copy/move the html file produced to your behat site  * view in your browser  * inspect the page immediately before it failed",5
"Write unit tests for logging stores and managers
We need unit tests for the following:-  # manager  # Legacy store  # Standard store  # External store",20
"Activity show/hide toggle doesn't work in hidden or orphaned sections
Clicking in the eye doesn't change the status but doing right click and opening link in new page works fine.    I have tested it in different themes with Topics course format.    Tested in Firefox 26 and Chrome 18",3
"Possible reflected XSS in editor and imagefile form fields
We have the issue below reported to us via a security review of Totara, and since it also affects moodle/master I am reporting it here.    I am reasonably sure that it is not exploitable, but I am not a security expert therefore I thought I'd better report it just in case. Feel free to close as not a bug if that is the case.    The report is as follows:    It has been detected by exploiting the parameter imagefile of the form located in URL [SITEURL]/user/edit.php?id=70&course=1    Request:    POST [SITEURL]/user/edit.php    Payload:    {code}  id=70&course=1&sesskey=xNwOTlWuU1&_qf__user_edit_form=1&mform_isexpanded_id_moodle=1&mform_isexpanded_id_moodle_picture=0&mform_isexpanded_id_moodle_interests=0&firstname=Whitney&mform_isexpanded_id_moodle_optional=0&lastname=Eldridge&email=whitney.eldridge@anaplan.com&interests[othertags]=1234&maildisplay=2&imagealt=1234&url=http://127.0.0.1/foo.html&imagefile=%22'%3E%3Cqss%20%60%3b!--%3D%26%7b()%7d%3E&mailformat=1&icq=1234&maildigest=0&skype=1234&autosubscribe=1&aim=1234&trackforums=0&yahoo=1234&htmleditor=1&msn=1234&city=San%20Francisco&idnumber=1234&institution=1234&timezone=99&department=1234&phone1=8000000000&phone2=8000000000&address=123 Main St.&submitbutton=Update%20profile  {code}    Response:    {code}  D%26%7B%28%29%7D%3E&subdirs=0&maxbytes=1048576000&areamaxbytes=-1&maxfiles=1&ctx_id=1&course=1&sesskey=xNwOTlWuU1' height='160' width='600' style='border:1px solid #000'></object></div></noscript><input value=""""'><qss `;!--=&{()}>"" name=""imagefile"" type=""hidden"" /><input value="""" id=""id_imagefile"" type=""hidden"" /></div></div>  <div id=""fitem_id_imagealt"" class=""fitem fitem_ftext""><div class=""fitemtitle""><label for=""id_imagealt"">Picture description </label></div><div  {code}    There is a similar issue with the summary_editor[itemid] parameter of editor form elements.    The problem only occurs in forms where the submitted value is being set as the initial value for the field when the form fails validation and is being redisplayed. Someone could potentially insert something malicious in the value field and have it executed when the page returns.    The reason we don't think this is exploitable is that it seems that the malicious code can only originate and execute on the same client.    However we did note that the Chrome XSS-Auditor blocked the code from executing ""because [the script's] source code was found within the request"".    We had a look to see where the problem is. It appears to be with the way the values for these form elements are filtered when server side validation of the form has failed. ""getCleanType"" is returning ""cleanhtml"" and ""raw"" for the editor and filemanager elements, respectively. ""clean_param"" with type PARAM_CLEANHTML is being applied to all three of the parameters for the editor, ""description_editor[text]"", ""description_editor[format]"" and ""description_editor[itemid]"", while the ""itemid"" and ""format"" parameters seem to only even contain integers. ""imagefile"" is being cleaned with type PARAM_RAW (the default when no setType has been specified).    This could be a problem with other form element types - any element where setType is not specified, or when an insufficient filter type is specified and the field is not cleaned in some other way before being sent back to the client when there is a validation error.",8
"Atto: input text should not have for parent the contenteditable tag
Input texts should be wrapped in a tag if some of the input content has for parent the contenteditable tag.    * pasted texts should be encapsulated into a tag if it contains element for which the parent is the contenteditable tag.  * same on key pressed.     These points are for both *html* and *source* mode.    h3.Why do we need that  if you trigger an action on a ""section"" which has contenteditable for parent tag, all other sections that have contenteditable for parent tag will be impacted (if the action is dealing with parent tag of course). It is not a behavior that a user will expect, and most contenteditable editors do wrap any input text into tags to avoid this issue.    h4.Example  My first section  < div >My second section< / div >  *My new section* {{=> if the user tries to right align this section, as we apply the action on the parent tag, the first section will be impacted too. It is not the expected user behavior. The user just want to apply the action on the new section.}}  < div >My third section< / div >",13
"Deprecate add_to_log() function
The add_to_log() function is being replaced by event triggering.    While all add_to_log() calls in core are being replaced, the function should be marked as deprecated so that messages are shown to developers of add-ons to prompt them to upgrade. It would be good to direct them to transition documentation in such messages. This might also help discover add_to_log() calls we might have missed in core.    This issue represents the first stage of deprecation. A period of deprecation should be decided (default is two versions, but this may need longer) and a second issue should be created to finalise the deprecation. See http://docs.moodle.org/dev/Deprecation#Moodle_Core_deprecation_process",3
"Write transition guide for events and logging
A docs page for developers is needed to describe how to replace the current use of add_to_log() with event triggers.    http://docs.moodle.org/dev/Migrating_logging_calls_in_plugins",20
"Write transition guide for reports that rely on logs
A docs page should be written for developers to describe how to replace their current direct log queries with logging readers.",20
"Improve accessibility of shortform collapsing
As raised in MDL-43867, we currently have aria-live=""polite"" on the fieldsets which propagates down to every element in the fieldset. We also do not announce whether the fieldset is open or closed.    We should announce the current state using the aria-expanded attribute, and remove the aria-live=""polite"" from the fieldset.    The problem with the current solution is that it causes firefox/NVDA to read characters twice as they are typed into a field.     ",20
"Atto - add function to format the currently selected block.
This is needed by several issues in the sprint so I'm adding this new issue to do it once and handle all the edge cases:    Plugins needing this:    blockquote fix, nolink, ltr/rtl    ",2
"Hide drag/drop icon for docked blocks
IMO, it doesn't make sense to display the drag/drop icon in a docked block.  We should hide it when blocks are docked.",3
"Dialogues no longer show automatically, or modally
Since MDL-43262 and MDL-43259 landed in master, we no longer show some types of dialogue automatically or modally.",8
"Atto: Double clicking on an image should open the image properties window
Atto: Double clicking on an image should open the file properties window",4
"Atto: Image sizes should keep proportions when resizing
When changing the sizes of an image after resizing it, the proportions are not kept, making it hard to resize an image properly. This option could be optional as it is in TinyMCE.",5
"Decide upon intended screen reader support
Each of the Screen Readers we've come across seem to do things their way, and have differing levels of support for:  * different accessibility features;  * browsers; and  * operating systems    We need to determine which screen reader(s) we intend to make Moodle work best with in order to choose the most optimal solution for these readers.    Our selection also has a big impact upon the amount of time it requires to develop new functionality and changes, and to test it.    From the compatibility matrix I've created so far (http://goo.gl/b4cVb5), there are approximately 30 combinations of screen reader + browser + operating system available to users.    h4. Considerations    Ideally, this should be as few combinations as possible because as we add each combination, the complexity increases dramatically, as does the time required for development and testing.    The ideal solution would be for a single, well documented, well tested, and widely available screenreader, but as http://goo.gl/b4cVb5 shows, this will not be possible as no screen reader supports both Windows, Macintosh, and Linux whilst providing support for multiple browsers.    Whilst Mobile support would be desirable, I think initially we should focus on improving the support for desktop screen readers as a priority and look at adding mobile combinations later.    h4. Options    Data suggests that the most widely used _primary_ Reader by far is *Jaws* [1] though it's usage has seen rapid decline over the past few years.    Jaws is followed in popularity by Windows-Eyes, and Apple's Voiceover.    ChromeVox is the only screen reader we've come across to support the same browser across multiple operating systems which may also be an important consideration for some users. At present its market share is low (0.2% [1]) but it is new to the arena - from what I can tell it was only released in February 2012 [2] with the survey taking place in May 2012.    NVDA, which came in at fourth place in the webaim survey is also an interesting option as it is the highest ranked free solution for Windows, though it is only compatible with Windows and the Firefox + IE browsers.    h4. Recommendations    To offer the most widespread selection it makes sense to choose from the following subset of screen readers.    I have not, at this stage, commented on the ease of development for each screen reader at present, or it's comparative support for various accessiblity functionality.    h5. Jaws  Pros:  * High market penetration    Cons:  * Cost to users  * Windows only  * Internet Explorer only    h5. NVDA  Pros:  * Free  * Mid-level market penetration    Cons:  * Windows only  * Firefox and Internet Explorer only    h5. OS X VoiceOver  Pros:  * Free  * Supports all browsers tested  * Also available on iOS    Cons:  * Mac OS Only    h5. ChromeVox  Pros:  * Free  * Cross-Operating system    Cons:  * Google Chrome only      h4. Sources:  [1] http://webaim.org/projects/screenreadersurvey4/  [2] https://code.google.com/p/google-axs-chrome/source/browse/trunk/chromevox/README?r=143",40
"Remove remaining uses of content_viewed, and deprecate it
We still have uses of content_viewed in core. It was decided to remove this from core because:-  # There is no educational value in this event.   # It doesn't contain enough information of what actually happened.  # If some of the viewed events can be grouped together, they should have their own abstract parent. ex- course_module_viewed  # we must not store localised strings in events  # we should not store urls in other array - we have get_url() instead !!!",20
"Atto: Focus on the editor is lost after opening a dialogue/menu
That is really inconvenient when using the keyboard on the buttons.    To replicate:  # Type a text and select it  # Tab back to the link button in the toolbar  # Trigger the link button with the keyboard  # Tab to enter a URL  # Tab to validate the dialogue  # Your cursor is now lost somewhere and you need to tab through to get back to the editor    Also try the _style_ picker, whenever you select a style or cancel the dropdown menu, the focus is lost.",8
"Atto: Implement basic keyboard shortcuts people are used to
|| PC || MAC || Action || Browser responsible ||  | *ctrl + A* | ⌘ + A | Select all | (/) |  | *ctrl + B* | ⌘ + B | Bold | |  | *ctrl + C* | ⌘ + C | Copy | (/) |  | *ctrl + I* | ⌘ + I | Italic | |  | *ctrl + U* | ⌘ + U | Underline | |  | *ctrl + V* | ⌘ + V | Paste | (/) |  | *ctrl + X* | ⌘ + X | Cut | (/) |  | *ctrl + Y* | ⌘ + Y | Redo | |  | *ctrl + Z* | ⌘ + Z | Undo | (/) |  | *ctrl + SHIFT + Z* | ⌘ + SHIFT + Z | Redo | (/) |    Editor specific notes:  *TinyMCE adds:*  CTRL + 1..6: H1 - H6 respectively  CTRL + P: Paragraph    *CKeditor adds:*  CTRL + L: Opens the link window.  CTRL + ALT + ENTER: fits the editor to the window.    *Aloha editor add:*  CTRL + .: Superscript  CTRL + ,: Subscript  CTRL + \: Clear formatting  CTRL + K: Insert link  CTRL + P: Pre  CTRL + 0: Paragraph  CTRL + 1..6: H1 - H6 respectively    Google Drive shortcuts are as noted here: https://support.google.com/drive/answer/179738",20
"Keyboard drag/drop does not correctly move items to the top of current parent
In course resource drag/drop, selecting 'To top of section X' when the activity is already in that section causes it not to move.",5
"Atto should start new content in a paragraph tag by default.
Currently, Atto does not insert anything in an empty text area, this works OK - but browsers will use divs by default, it would be better to make the default a paragraph (more semantic).    We can do this easily by inserting <p></p> in init if there is no text and removing <p></p> on clean_html if it is the only thing in the div.  ",40
"Improve Atto Table controls
The inline menu icons break badly because (a) they prevent you entering a table cell (b) need to be kept in sync whenever the source is modified.    Instead - I added remove the menu icons - and clicking on the table button when you have the cursor in a cell will open the table context menu at that cell.    When the buttons are showing state this will work even better.",8
"Pressing escape in nested modal dialogues should only close the top dialogue
If you open a filepicker, search for and preview a file, then press escape, all modals are closed instead of just the top one.",5
"Atto has wrong icons for screenreader helper and accessibility checker
There is no existing useful icon for these things.    Suggestions:    Accessibility checker:  http://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Gnome-preferences-desktop-accessibility2.svg/40px-Gnome-preferences-desktop-accessibility2.svg.png    Screenreader:  http://html.orange-idea.com/valera-wp/wp-content/themes/valera/assets/img/plus.png  ",5
"Add an active state to the buttons, when the text under the cursor has the style applied.
E.g. if the cursor is in some bold text, the bold icon should visually change.",8
"Create generic way for Widgets to focus on something when they close
Ideally, when a dialogue is closed, it should focus on the item which opened it, or another appropriate contextual item.    This is a fairly generic thing to do so we should try and make this easy for everyone by creating a module which any widget can plug into.",13
"use 'restore' and 'ws' origin in logged events
h2. Current problem  Problem is that we cannot just falsify log history by injecting log records from the restore file, events must be always triggered and we need to know where are the courses coming from, that means the restore process needs to log everything that is happening during restore.    * import (=== backup+restore) of activities should not try to restore any logs  * restore from different site cannot create log entries with non-existent users  * duplication of course (restore into new course) may bork stats  * statistics should probably ignore the events coming from restore completely      h2. Possible solutions    h3. A/ use events    1/ trigger \core\event\restore_started and \core\event\restore_finished events (this might be useful in any case)  2/ log writers would watch for these and start adding 'restore' origin when writing events to storage during the restore process    h3. B/ new $PAGE->get_request_origin()    The idea is to have one method that tells you if you are doing something from normal page, ws, cli, restore. The restore code would use some private API to tell PAGE that restore starts/end or it could even use 1/, but that would require a new observer which does not seem optimal to me. At the same time we could add $PAGE->get_request_ip().    After A/ or B/ is implemented we could filter out logs coming from the restore process in stats and other areas where we want to ignore the events triggered during restore.    The next step would be to optionally restore the original log data - we would need backup/restore support in log stores and new method in base event class which would have to be overridden by events that can recalculate the ids.      ",20
"Deprecate $event->can_view() until its purpose has been clarified
The can_view() method in event base looked like a good idea, unfortunately it is not easy and cheap to implement it everywhere.    At preset it is returns true for admin only which makes it unusable in reports.    At present the reports are expected to use own capability together with \core\log\reader::can_access($reportcontext) and ignore the \core\event\base::can_view() method.",40
"Ical import ignores some recurrence rules
While working on MDL-42079, I noticed our import library ignores some of the imported recurrence rules, such as FREQ=DAILY; which is a valid rule.",20
"Atto Improve API when a plugin wants multiple buttons.
There is a bit of code in there expecting a 1 to 1 mapping of plugins to buttons.  This need not be true.    Should be used by lrt/rtl, justify (link could do it too).  ",2
"Atto: Toolbar menus should work with keyboard navigation
It is confusing when using left-right through the menu to get to a context menu, and then having to tab in the dropdown menu. I think we should use arrow keys in that case too.",8
"Make the Atto equation editor example library into an aria toolbar.
This means manage the active descendant, keyboard navigation, tabindex etc.    ",20
"Assignment resubmissions do not automatically reopen if using quick grading
It seems as if assignments will only automatically reopen (with attemptreopenmethod_untilpass set) if using the save_grade function (marking students one by one) and not if using quick grading and the process_save_quick_grades function.    As a result, this also affects the offline grading worksheet.",5
"Modal Dialogues cause a jump in page position
https://github.com/yui/yui3/pull/1636",8
"Refactor Atto code
I've put together a (mostly) working PoC to restructure the atto code.    At present, the code is based around a structure which must be aware of every editor on the page. We have to pass around an elementid, and each plugin adds buttons to their own element, but with a single click handler.    The code also does not meet the coding style guidelines.    IMO, we need to refactor this to:  * not pass around the elementid;  * comply with coding style requirements;  * include API documentation to assist plugin developers;  * have one editor instance per editor;  * have instances of the plugins on each editor rather than globally.    This will:  * make our lives far easier in the future to maintain because we'll be reducing the code duplication;  * allow people to write plugins more easily and with much less code duplication;  * which will allow for a greater diversity of plugins in a shorter period;  * give better confidence from third-party developers writing plugins for the new editor, and as a result the community as a whole (just think how much we've complained about the TinyMCE plugin structure).    Personally, I feel that this needs to be done before integration, and certainly before release.    I've been working on a PoC which is semi-functional (35% of plugins are already done and the others aren't far off) and it only took a few hours to write including appropriate API docs.  ",100
"Atto: Toolbar should wrap on several lines
Currently, when expanding it, some buttons are opened on the same line, some on the next one. This creates an inconsistent visual experience on Desktop. The buttons should have a constant position so that it makes it easy to find them, and see where they will appear when expanding/collapsing.     Damyon: I think this is not a blocker (it could be an improvement, but to decide on the best functionality, is difficult as there will be differing opinions. I agree that a consistent order makes things easier to ""learn"" (so they can be repeated quickly). This will be improved by having keyboard shortcuts. Also maybe just adding a break before the non-collapsed buttons is enough. The downside to more wrapping, is that on smaller screens there is more real estate taken up, and the wrapping starts to look random (long, short, long short etc).)  ",13
"Atto: Invert indent/outdent buttons
Invert indent/outdent buttons (inconsistent with any other editor).  ",5
"The link colour in Bootstrapbase is not WCAG compliant
According to the accessibility checker in Atto, in Boostrapbase/Clean the contract of the links are reported as not compliant with WCAG AA.",8
"Atto: Limit the height of the editor to prevent the toolbar to go off screen
Limit the height of the editor to prevent the toolbar to go off screen.    There are some options for this:  * forced max height that cannot be changed,  * default max height that can be manually sized, or  * graceful resizing so that the editor remains contained within its usable space.    The complexity of these option is in increasing order.    The middle option may be the best compromise.",13
"Atto: A large selection causes the editor to freeze for some seconds
A large selection causes the editor to freeze for some seconds.    This is due to the state checking for button highlighting...  https://github.com/damyon/atto_27/commit/dfe7bcddb6f49dcbe4c37edf00564f2bd15e883b",40
"Atto: Being able to set the alignment (flow) of the images
Being able to set the alignment (flow) of the images.  ",13
"Atto: Table plugin not adding a table on IE
Table plugin not adding a table on IE8/9",40
"Atto: Image plugin not reliable editing an existing image
Selecting the image and then clicking the image button does not always work as expected.",20
"Atto: Missing images are not displayed at all in the editor
Images with dead link are not displayed at all in the editor, it is impossible select them to fix or delete them.  ",8
"Atto: Indent/outdent plugins should not use <blockquote>
Indent/outdent plugins should not use <blockquote> tag as inappropriate, setting a class 'indent' seems to be the best.",100
"Atto: Focus lost in the Equation editor after inserting a symbol
Focus lost in the Equation editor after inserting a symbol, the cursor should remain at the same place to insert multiple symbols at once.  ",5
"Atto: Simplifying the 'accessibility checker' to display sensible content
Simplifying the 'accessibility checker' to display a sensible content rather than the entire node <a ...>...</a>.  ",13
"Atto: The screenreader helper/accessibility checker should always display something for missing images
The 'screenreader helper' should always display something for missing images. Currently images without an alt tag are reported but not identifiable.",8
"Atto: Being able to see the list of plugins available in the settings UI
Being able to see the list of plugins available in the settings UI. See TinyMCE for an example.  ",8
"Atto: Combine plugins indent/outdent into one.
Combine plugins indent/outdent into one.    ",5
"Atto: Combine plugins link/unlink into one
Combine plugins link/unlink into one.      ",8
"Atto: Prettifying the HTML when switching to HTML view
Prettifying the HTML when switching to HTML view.    We can use js-beautify (MIT License) for this purpose.",5
"Add  'HTML templating' features to Atto text editor
Editing-teachers and non-editing teachers have the capacity to create HTML templates using the TinyMCE HTML templating feature (Moodle 2.4 to 2.6)    Moodle 2.7 is set to have a new Atto text editor http://docs.moodle.org/dev/Editor_2.7 replace TinyMCE editor from Moodle 2.7 onwards.    Is it possible to incorporate ""HTML templating"" as a feature in the Atto text editor to enable them to continue to use the HTML templating functionality.    The following video demonstrates the TinyMCE ""HTML templating"" functionality    Video - Moodle tinyMCE Editor 'HTML templates' and 'Font Awesome' icons (Moodle 2.4 to 2.6)  http://youtu.be/5FUPRVwgKmo     This video demonstrates the type of configuration features the Atto HTML templates would need to have.    Video - Configuring Moodle tinyMCE Editor 'HTML templates' and 'Font Awesome' icons (Moodle 2.4 to 2.6)  http://youtu.be/_gZVOlTaWUg    Note: Example TinyMCE Configuration instructions to set up the feature are also included in the video summary.    Note: Please refer to https://tracker.moodle.org/browse/MDL-38742 for prior discussion on the topic of HTML templating via the TinyMCE text editor.",100
"Change the tag API to include the contextid and component when tagging an item.
We want to update the database table 'tag_instance' so that the contextid and component are stored. This will allow for easy deletion of tags when cleaning up particular areas of Moodle, it will also be consistent with other parts of the Moodle API - eg. the file area.",40
"Show move drag handle in header for ""Add a block"" block
Issue MDL-43723 changes the block drag and drop so it only works on the drag handles and not the entire header. This is being removed because it causes issues when scrolling on mobiles, and is not consistent with drag and drop in other areas of Moodle. With this change only - it is no longer possible to move the ""Add a block"" block - because for some reason it does not show the drag icon. Make it so.",8
"Replace add_to_log in mod_workshop (part 2)
Unfinished after MDL-40921:    {code}  $git grep add_to_log  mod/workshop/locallib.php:        call_user_func_array('add_to_log', $args);  {code}",13
"Update to YUI 3.15.0
Released this week and addressing a number of issues that we've patched in the mean-time.",5
"filter_glossary has the potential to be slow on large sites
As a follow-on to MDL-43524 which removed global text caching, we need to examine the glossary filter and probably add MUC caching there to improve performance.    The glossary filter is what puts links in texts to glossary entries.  There is quite a lot of processing going on in the background even before the simple text replacement, and this needs to be redone every time the cache is invalidated.    Petr has raised that the fully correct way would be to use new events or the as-yet-unwritten hooks to invalidate the caches, but I think that might be too much to do before 2.7, so I want to see a quick solution here even if it may mean relying on less-perfect cache invalidation.    This issue requires performance comparison tests before and after the fix.",40
"filter_activitynames can be improved after dropping of global text cache
As a follow-on to MDL-43524 which removed global text caching, we need to examine the activity names filter and probably add MUC caching there to improve performance.    The activitynames filter is what puts links in texts to other activities in the same course.     Petr has raised that the fully correct way would be to use new events or the as-yet-unwritten hooks to invalidate the caches, but I think that might be too much to do before 2.7, so I want to see a quick solution here even if it may mean relying on less-perfect cache invalidation.    Tests showing performance before/after are required.  ",20
"Incorrect urls for calendar logs in log and loglive reports
Calendar actions such as adding and editing events generate logs. The logs link to the page in the format course/event.php?action=edit&id=12931 in reports.   This link generats  a 404 error as the specified path does not exist.",3
"Atto triggers required when still in focus
Not sure how best to describe this one, but:  * Open a form and don't enter anything yet;  * Do any of the following:  ** Press the *Bold* button in the toolbar  ** Click into the editor area, and use a keyboard shortcut for bold, italic, underline, etc.    It seems that any time the content editable loses focus, we trigger various checks rather than any time the editor as a whole loses focus.",5
"Grade - Add an option to export the total in letters
In gradebook, when we try to export the grades, we want to add an option that will add an new column at the end that is the total in letter (based on the grades-letters setting of the course.",40
"Atto is using deprecated features and modules
Just a quick commit to tidy these up.",3
"Remove duplicates in YUI rollup
When we converted from SimpleYUI, I must have made a transposition error. We include the same module twice in slightly different rollups. The first is never used as a result.    The duplicates I've removed are:   * yui-base;  * get;  * features;  * loader-base;  * loader-rollup; and  * loader-yui3.    These contain all of the metadata for Moodle, the loader itself, and the fetching mechanism. If they were broken in some other way, we would see a very large bang and no working Javascript within Moodle.    To clarify, these were already included by us using 'yui' which is a rollup of the above 6 modules.    File-size savings:    || || Content size || Gzipped size ||  || Before | 388KB | 112KB |  || After  | 289KB | 86.6KB |",5
"buffer raw data instead of full events in log stores
The problem is that event contains references to snapshots and other large custom objects which consumes memory.    Also we need to get the extra info such as origin before we put data into buffer because in theory it might change (such as possibly when doing restore in the future).    Yet another problem is that we should not buffer events we do not want to store.    hmm, and the patch actually reduces code duplication too...",4
"validate course id is matching context in new events
Theoretically somebody might supply inconsistent course id - context combination when triggering event, we can use some developer checks to warn about this problem...",2
"Custom menu submenu arrows appear on the right on RTL languages
On bootstrapbase-based themes:  # Create a custom_menu that consists of multiple levels (the example custom_menu is fine).  # Install and switch to an RTL language (e.g. {{he}}).  # Try using the custom menu.  #* Observe that the submenus and their arrows appear on the right rather than the left.  #* Observe that when activated, submenus are not where they are expected to be.",3
"Define and correct edulevel in events
Educational level is inconsistently used in some of the places including reports. Documentation http://docs.moodle.org/dev/Event_2#Level_property doesn't consider all cases like report_participation etc.    It would be nice to review all events and fix edulevel where required.",13
"Declare interfaces supported by reports and implemented by stores.
We need to provide the following information to the admins:-  # Each report should declare what interfaces it supports.  # Each store should declare what interfaces it implements.",20
"Add support for source maps with less.php
When compiling LESS from PHP in designer mode, we should add the source maps to make it easier to debug the CSS.",5
"Show/hide, edit title, group mode module buttons don't trigger course_module_updated event
If you edit course-module and change only visibility, there are \core\event\course_module_updated for this.    However when module visibility changed on the course page via specical icon there is no similar event.     This is inconsistence. It is creates problem for the module, trying to react on it's visibility status changes (for example we are trying to emit special event when student is able to see assignment text in our poasassignment module).",8
"Tool to list all events
As events are being added and updated, it is very hard to find which events are available and what data they store.    We need a tool that is useful for two main user groups:  # for analysts/researchers, to understand what data may be found in our logs   # for developers, to understand what events are available to use     The tool should:  * Generate a list of all events in core   * Include high-level descriptions of the event  * List as much as possible about the payload data in the event  * Filter/search by verb/module etc.  * List the observers that are consuming those events.      ",100
"The \core\event\message_sent class should be passed the system context (for now).
It was decided in SCRUM that we should be passing the system context when sending messages.",3
"Incorrect urls and strings in many events
Many of the events have incorrect urls.  example:-  return new \moodle_url('report/loglive/index.php', array('id' => $this->courseid));  return new \moodle_url('report/log/index.php', array('id' => $this->courseid));    etc    There are some other issues with some events as well such as missing/incorrect strings etc.",20
"Typo in mod assign fullname() function
$userid should be $user->id    (Thanks Mark)    This is a master only bug introduced by MDL-28448",5
"Remove incorrect use of snapshots in events
We should not be using snapshots in the events other than in the functions get_legacy_logdata() and get_legacy_eventdata().",5
"Make atto the default editor during upgrade
We do this for new installs, but should do so for ugrades too.",5
"Collapse plugin should handle suboptimal toolbar configuration
Collapse plugin does not fail gracefully if there are fewer than n groups.  If there are fewer groups, we should either:  # fail gracefully; or  # not add the button at all.    I go for option 2. If the show groups count <= number of groups + 1, then we should not show the plugin IMO.    I've gone for the groups+1 option because there's a strong chance that the plugin will be in a group of it's own and will thus take up a whole slot.    It should also not be displayed if it will not be visible by default.",5
"Update showgroups string in atto_collapse
As discussed in the demo yesterday:  {code}  ""Show first (n) groups when collapsed.""  {code}",2
"Correct uses of color => colour in atto plugin language strings
{code}  accessibilitychecker/lang/en/atto_accessibilitychecker.php:$string['needsmorecontrast'] = 'The colors of the foreground and background text do not have enough contrast. To fix this warning, change either foreground or background color of the text so that it is easier to read.';  backcolor/lang/en/atto_backcolor.php:$string['pluginname'] = 'Background color';  fontcolor/lang/en/atto_fontcolor.php:$string['pluginname'] = 'Font color';  {code}",3
"Explain the meaning of the group names in the toolbar configuration
They have no real meaning ATM but they need to be unique. This just needs explaining in the admin setting help.",3
"Atto plugins are using different icons for the plugin / toolbar
Examples are the accessibility plugins - and some of the combined plugins.  ",5
"Atto collapse plugin setting help update
Change description to: ""Show first (n) groups when collapsed""",2
"Change TeX help link in equation editor to point to a moodle docs page
And then the moodle docs page can point to good external references.",5
"Atto: Prevent new table creation when within an existing table
For now, you can create a table in another table by:    # Clicking the table icon when the cursor is in the caption  # Selecting more than one cell  # Click the table icon    This also happens when you select the caption cell (at step 2).    _Expected result:_ The table editing context menu will pop-up    _Actual result:_ The new table creation dialogue appears and when you click to add a new table it doesn't work.",20
"Atto Undo starts highlighted on an empty field
This is because we insert <p></p> behind the scenes, but it gets caught in the undo stack. I think treating <p></p> as '' in the undo plugin would fix this.",5
"Atto menu styles are inconsistent
Atto drop down menu styles are currently using a new invented style - they should be changed to match other drop down menus in Moodle.    Other menu styles in moodle are the course editing menus and the edit pdf menus.     The Edit PDF menus were designed by Barbara, and the course editing ones were done by Sam. We should aim to make all 3 the same - but that is not this issue, this issue is just to pick a winner and make Atto look like that.   ",20
"Display the list of keyboard short cuts somewhere (in the alt for the buttons?)
And should take into account the current browser etc.",13
"Atto title plugin bugs. It is possible to choose a title from the menu and nothing happens
Notes from demo:    Menu isn't closed when selecting a title (or applied) (select, choose h2, select text, open menu, press escape, open menu press h2 - stays same)    This happens on Firefox, not Chrome",13
"Atto image plugin - remove the word ""Preview"" from the dialogue.
It's unnecessary.",2
"Change wording in Atto image plugin
This is about the alt / decorative only fields.    New wording: “Describe this image for someone who cannot see it�? / “Description not necessary""  ",5
"atto_image: Dialogue is not resized after the accessibility warning is displayed
Using the image plugin:  * open the plugin  * find an image  * try to submit without setting alt or presentation    Issue:  The dialogue is not resized. This is fine for most users, but for users on small-height devices, the submit button may have dropped off the bottom of the page.",5
"Atto: Save cursor position with undo/redo stack and restore it
This was a suggestion from Fred in the Atto demo.",40
"Atto Table plugin caption field should be a text input, not a textarea
Simples.",3
"Change table context menu, to open from the table button, not the table cell
Also maybe change the wording to e.g. ""Insert column after current cell"".    ",8
"Atto tables with long captions wrap into the table
This is a CSS bug in the table plugin styles.css - it sets a fixed height on the caption which should be a min-height.",5
"Atto does not respect height of original text area field any more (it used to)
Something changed here, and now Atto is always huge. Yuk!    (Seriously this is a real problem on long forms).",13
"Accessibility checker does not trigger selection updated when it selects the image nodes
And so the image button in the toolbar is not highlighted. The Accessibility helper does this correctly.",5
"Atto : show html view with a monospace font
what it says",2
"Make Atto equation editor dialogue wider 
just a bit (keep mobile in mind too please)",5
"Atto Equation Editor example toolbar should have consistently sized buttons
Set a min-width on the buttons in the examples toolbar, so they will line up better.",3
"Atto equation editor, put a border around the preview
What it says",2
"MathJax menus show behind dialogues
This is most noticable in the Atto equation editor",13
"Enable MathJax filter by default
For new installs. Not sure about upgrades (you don't want 2 tex filters and you don't really know which other filters handle tex).",5
"Reformat/rewrite the help text for MathJax (needs some line breaks) 
Reported by Andrew N",2
"Fix lang string for Mathjax filter setting HTTP (Should be HTTPS)
What is says",2
"Atto plugins with settings do not show settings links on manage plugins page.
Probably something to do with plugininfo.",20
"get_groups(), get_groups_all() and groups_get_user_groups are not covered by unit tests
The following functions are used all over Moodle but are not currently covered by unit tests. Behat tests should cover them to a large degree but it would be nice to have additional assurance.    1) get_groups_all() and get_groups($groupingid = 0) in modinfolib.php do not appear to be covered at all in modinfolib_test.php.    2) groups_get_user_groups() in grouplib.php. groups_get_user_groups() is itself not tested at all in grouplib_test.php",8
"Accessibility checker goes wide unnecessarily 
It would be better if it adapted to the content better.",5
"The table creation box is huge, giving too much room to the accessibility info
The problem with this dialogue being so big, is it makes me want to see at the bottom for something important.    It seems to me like this info is getting too much prominence. ",2
"The bold/italics buttons don't maintain their selection when pressed
Steps to reproduce:    # In atto, write ""Damo Rulez""  # Select the word ""Damo"" word and press bold button    Expected result:  The word ""Damo"" is formatted bold and the selection remains on ""Damo""     Actual result:  The word ""Damo"" is formatted bold but the selection is not retained and the insertion point moves to the end of the word.    NOTE: this is contrasting behaviour to google docs for eg. (and I guess MS Word etc)",5
"Strings missing for some subplugins
Logstore subplugins are displayed on Plugins overview page as:  ""Log store manager / logstore""    There is a string missing to translate internal name ""logstore""    Same with assignsubmission, assignfeedback, ltisource  (I think we can ignore ""assignment 2.2"" subplugin)",2
"Atto Too many image alignment options
I think superscript and subscript can be removed - probably some others too. We want to keep these interfaces simple.",5
"Atto: Insert image fails on iOS 7
Buy me and iPhone and i'll fix it :)",13
"Atto: Redo behaviour is a bit wonky
undo/redo can get a little confused so that there are duplicates on one of the stacks. A bit of testing multiple undo/redos shows this in action.   ",8
"Atto: Save to undo stack on text deletion
The undo stack save is triggered by arrow keys and clicks on the content area. This is based on testing the native undo in chrome. We could possibly improve this to save the position when someone starts deleting things (but if they hit delete 15 times we should only save for the first one).     We could do this by detecting that the new text is shorter than the previous text, save the stack and set a ""deleting"" flag.     We would need to test the performance of this with a really long bit of text in a sucky browser (guess which). ",8
"mod_assign grading table menus do not show
Some new yui bug - the menus are positioned way off the screen.    Probably easiest to move these to ""Edit"" menus like the course editing ones.    The old ones could not be tested by behat anyway.",5
"Custom menu broken in all non-bootstrap themes. 
The custom menu code uses the ""YUI3 menunav"" module (which is deprecated). For some reason this is broken in master (probably because of a yui update). Bootstrapbase provides it's own renderer for this which uses the yui module for bootstrap so it's not affected.    I noticed this was broken in mod_assign and fixed it by converting to an action-menu - this doesn't really help with custom menu though.    ",13
"Atto font colors are broken in IE
This needs to be investigated, but in IE9:    - Regardless of the text I have in the field, the form validation was reporting it as empty.  - Switching to HTML view does not work    And maybe other issues.    Note: I might have played with fontcolor and backcolor during the test, mayve that is related.",8
"Per-request temp directories
According to [the docs|http://docs.moodle.org/dev/Server_clustering_improvements_proposal#.24CFG-.3Etempdir]: ""If any script tries to use temp files that were not created during current request it is a bug that needs to be fixed.""    Now in load balanced environment (without sticky sessions) with multiple web servers and local temp  dirs defined on the web servers local file systems, there are at least two cases where files are used for more than the current request:  - upload users via CSV  - restoring course backups    Trying to perform the above actions leads to errors and the inability to complete the actions unless the local tempidr ""$CFG->tempdir"" is removed from the configuration, losing the local tempdir functionality.    This issue introduces a new function:    {code}  make_request_directory($exceptiononerror = true);  {code}    This can be used in the same way as make_temp_directory(), but it does *not* take a subdirectory as an argument.  It always outputs the full path to the new directory, and ensures that it will be deleted after the request finishes.",40
"The dialogue to pick a file in file picker is not nicely styled
See screenshots for the following:    - The checkboxes are not well displayed  - The padding on the right of the text inputs is too small, they seem to close to the edge  - The info at the bottom do not have separator  - When there is a separator at the bottom, it is glued to both sides  - From an accessibility point of view, I'm pretty sure the file info are not properly ready as SPAN is not considered as a word separator  - Margins below and above the fields seems unnecessarily high    All themes are affected, so _clean_ and _base_ should be tested. To select _base_ pass ?theme=base to the URL.",20
"The gradebook export xml format does not handle the settings ""Export new or updated grades only""
The setting ""Export new or updated grades only"" in the gradebook export xml format is only handled in the preview, not in the file.    *To reproduce:*  # Go to the gradebook in a course with some graded activity  # Be sure to have an ID for each activity and for the course category in the gradebook  # In the export section, select the XML format  # Be sure to select ""Export new or updated grades only""  # Click Submit  # The preview will only show the new or updated grades as expected  # Click Download    _Expected result:_ The exported file should only contain new or updated grades.    _Actual result:_ The file will include all grades, not only the new or updated grades, which is wrong.",20
"Atto: UX improvements for table editing.
It was discussed in Scrum and we are not yet happy with the table editing controls in Atto.    We will probably move to a more comprehensive table editing dialogue in the future - but it is too late to start work on that for 2.7 - in the meantime there are 2 improvements that can be made to the context menu that will make it much nicer to use.    1. -Add an option to add/remove the caption for a table-  2. -Hide options that don't make sense when the menu opens (e.g. add caption to a table with a caption, move the left column to the left)-    When I implemented this issue and tested it it still was confusing to use so I went further.    I made the entries in the context menu hidden when they didn't make sense for the selected cell - and added a ""Edit table"" entry that opens a window to edit the caption and change the headers for the table.",13
"Update to YUI 3.17.2
Due for release on Tuesday 8th April, during our code freeze week.    Current history rollup is at https://gist.github.com/andrewnicols/9948045 but there are still a few items missing which will be integrated this week.    We are currently affected by:  * Drag/Drop broken for some devices in 3.15.0 whilst trying to fix Android (https://github.com/yui/yui3/pull/1721)  * Calendar CSS in RTL (and non-RTL as it happens) (https://github.com/yui/yui3/issues/1685); and  * Logging levels (minor and not yet in the history).    Because Yahoo! are based in California, I suspect that we won't actually see this until Tuesday evening but I think that we should consider whether we allow this in anyway.    From our PoV, it's only a patch release - I think it's a minor release from YUI's PoV because they're including a new Pure module in with the CSS which dictates a minor release rather than a patch.    The drag/drop issue is the main consideration IMO.",8
"Repository picking in Atto Image plugin broken
There is a bug in MDL-44000 that prevents picking an image from a repository.",2
"Weight Defaults to Zero in Weighted Mean of Grades Aggregation Method
When adding new assignments to new courses, weight of grade in gradebook defaults to zero with the ""weighted mean of grades"" aggregation method in certain situations.  If new assignment is added, and gradebook has been set to ""Simple Weighted Mean"" then switched to desired ""Weighted Mean of Grades"" aggregation, default weight will show up as 1.0 as is intended.  However, once grading aggregation has been switched to ""Weighted Mean of Grades"", subsequent assignments added will have a default weight of 0 in the gradebook instead of intended 1.0.    Steps to Reproduce:    1. Add new course and save.  2. Go to new course main page, click ""Turn on editing""  3. Go to first available week, click ""Add an Activity or Resource""  4. Click Assignment and Add  5. Name assignment, add description, click ""Save and Return to Course""  6. Click Course Administration<Grades<Categories and Items  7. Click full view option  8. Notice Aggregation is set at default to ""Simple weighted mean of grades""  9. Select drop down menu for Aggregation, change to ""Weighted mean of grades""  11. Save changes  12. Notice weight default shows up as 1.0 as intended.  13. Return to your course, and add new assignment with same steps detailed above within same week or in new week.  14. Save and Return to course  15. Click Course Administration<Grades<Categories and items  16. Click full view  17. Notice Aggregation is set to ""Weighted mean of grades"" as this setting was earlier changed and saved.  18. Notice default weight of most recently added assignment is now showing as 0, when it should be 1.0        ",20
"Atto: Selection reverts to previous selection on toolbar button press in WebKit browsers
This presents when a selection is made by dragging such that the cursor is outside of the editor when the mouse button is released.    Repro steps:  # Launch Atto.  # Select some text, making sure that the cursor stays within the editor (a good way to do this is by double-clicking on a word).  # Select some other text, dragging outside of the editor and releasing your mouse button.  # Click a toolbar button.  #* Observe that your selection reverted to the first thing you selected.  ",5
"add support for MariaDB 10.x from Ubuntu
Ubuntu is using a bit more complex database version - ""5.5.5-10.0.10-MariaDB-1~saucy-log"" - we need to relax the regex a bit.",2
"Bad RTL filepicker styles
A few CSS styles in the filepicker only look good on LTR, or at the very least don't consider RTL circumstances.    *2.5.x:*  _theme/base/filemanager.css_  * line 72, {{.fp-toolbar div}} padding-right rule  ** applies erroneously under RTL  * line 72, {{.dir-rtl .fp-toolbar div}} width:100px rule  ** this rule came in with MDL-32479 and seems like a really, really bad idea (see https://tracker.moodle.org/secure/attachment/37967/Private%20files%20RTL.png )  * line 74, {{.fp-toolbar img}} margin-right rule  ** applies erroneously under RTL  * line 79, {{.fp-viewbar}} style definition includes an 8px margin-right under LTR (Recent files LTR.png)  ** not a problem under RTL since in that circumstance the element in question floats left; this rule should be removed  ** need a text-align rule (and an RTL rule to match) because the viewbar is actually narrower than 72px; it takes up 72px, but due to negative margins actually appears smaller.  * line 81, {{.dir-rtl .fp-viewbar}} definition includes an explicit width declaration @ 100px (Private files RTL.png)  ** 72px is enough and we need horizontal space for Alfresco's selectbox (see MDL-36836)    *2.6.x:* ( https://tracker.moodle.org/secure/attachment/37975/26%20Private%20files.png )  _theme/base/filemanager.css_  * line 73, {{.file-picker .fp-toolbar div, .fp-navbar .filemanager-toolbar .fp-toolbar div}} margin rule  ** no matching RTL definition  * line 89, {{.dir-rtl .file-picker .fp-viewbar}} margin-left:0 rule  ** erroneous - puts the viewbar right up against the border",5
"Mod_forum subscriptioncreated and subscriptiondeleted events link to incorrect locations
# Create a forum  # Enable optional subscription  # Edit subscribers  # Add a subscriber  # Remove a subscriber  # Check the logs    Change the mod_forum 'subscriptioncreated'  and 'subscriptiondeleted' events to link to mod/forum/subscribers.php.    Identified in: https://tracker.moodle.org/browse/MDL-44928?focusedCommentId=285859&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-285859",5
"PHP-OLE is GPL-incompatible
We removed it in MDL-42381..    But as reported by Debian, we have another instance in lib/phpexcel/PHPExcel/Shared/OLE*    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=746594    Note that in http://docs.moodle.org/dev/Moodle_libraries_credits#PEAR_OLE_Classes    It's specified that an 'exception' was made for Moodle. That implies relicensing and is all bit hazy. If we don't need it we should get rid of it..",40
"Decide Moodle 2.8 requirements and push them to environment.xml
We need to decide ASAP about all the PHP/DB/Moodle versions requirements and put all them into the environmental tests (adding them to all supported branches).    At the same time, if there is any change in the PHP version... some changes have to be populated to various installers and replace them by the new one when corresponding. To get a list of candidates:    grep -r '5\.x\.y' * | grep '\.php'    (and look for MDL-39007 status, about to unify all those duplicated checks)  (and don't forget about the MyISAM thing @ MDL-46064)    Ciao :-)",13
"Editing external blog throws exception
Register an external blog.  Click on ""edit cog"", change something and try to save.    Reproduced on 2.7, pretty sure the same will be in previous versions    {code}  Invalid user    More information about this error  Debug info: SELECT id FROM {user} WHERE id IS NULL AND deleted = ?  [array (  0 => 0,  )]  Error code: invaliduser  Stack trace:        line 1451 of /lib/dml/moodle_database.php: dml_missing_record_exception thrown      line 1427 of /lib/dml/moodle_database.php: call to moodle_database->get_record_select()      line 6404 of /lib/accesslib.php: call to moodle_database->get_record()      line 107 of /blog/external_blog_edit.php: call to context_user::instance()    Output buffer: <br /> <b>Notice</b>: Undefined property: stdClass::$filtertags in <b>/home/marina/repositories/int_master/moodle/blog/external_blog_edit.php</b> on line <b>102</b><br /> <br /> <b>Notice</b>: Undefined variable: newexternal in <b>/home/marina/repositories/int_master/moodle/blog/external_blog_edit.php</b> on line <b>107</b><br /> <br /> <b>Notice</b>: Trying to get property of non-object in <b>/home/marina/repositories/int_master/moodle/blog/external_blog_edit.php</b> on line <b>107</b><br />   {code}",8
"PDF Annotations Remain After PDF is Replaced
When a student edits an assignment submission and deletes a PDF that was already annotated by the teacher and then adds a new PDF submission, the annotations given by the teacher for the old PDF remain in the new PDF.    Steps to reproduce:  # In any course, create an Assignment that allows file submissions.  # As a student, submit a PDF file for the assignment.  # As a teacher, annotate the student's PDF submission and save.  # As the student, return to the assignment and click Edit Submission.  # Delete the existing PDF file and upload a new PDF file.  Save changes.  # As the teacher, access assignment and click View/grade All Submissions.  # Click Grade icon under Grade column for the same student.  # Launch PDF editor and observe    Expected results: Annotations from the old PDF file should not display in the new PDF submission.    Actual results: Annotations from the old PDF file are retained and display in the newly submitted PDF file.  ",20
"Fix use of ORDER BY id in the messaging system
h5. *TO PEER REVIEWER*    There are two diffs to review here, please comment on which you think is the better solution; or if you think neither of them are.    Mark's: https://github.com/markn86/moodle/compare/master...MDL-45594_master  Tim's: https://github.com/markn86/moodle/compare/master...MDL-45594_master_alt    -----    See MDL-35453.    Problem lines of code:    {noformat}  message    lib.php (3 matches)      715: SELECT mr1.useridto AS userid, MAX(mr1.id) AS mid      721: SELECT mr2.useridfrom AS userid, MAX(mr2.id) AS mid      732:  ORDER BY mr.id DESC"";       741: SELECT m1.useridto AS userid, MAX(m1.id) AS mid      747: SELECT m2.useridfrom AS userid, MAX(m2.id) AS mid      758:  ORDER BY m.id DESC"";       799:  ORDER BY mr.id DESC"";//ordering by id should give the same result as ordering by timecreated but will be faster   {noformat}",20
"Question text overlaps other parts of the UI on the edit quiz page.
On the edit quiz page, the question text for random questions overlaps the Maximum mark input box and other things. See the screen grab.    To reproduce:  # Add a new quiz to a course.  # Add several questions to a category in the question bank.  # On the edit quiz page, add a random question selecting from that category to the quiz.  # Observe overlap as in the screen-grab.",13
"When restoring a backup, if no category or course is selected the page reloads with no error message
If you restore a backup and at the Destination stage, you choose to create a new course but do not select a category, the page reloads upon pressing the Continue button.  There needs to be an error message stating why the page reloads, as currently it's not obvious that you've forgotten to select which course.    *Steps to replicate:*  # Log in as admin/course creator  # Click 'Restore' in Site Administration  # Upload a backup  # At destination stage, Click the Continue button under ""Restore as a new course"" without selecting a category.    _Expected Result:_ The page would reload and generate an error telling you  that you must select a category to restore to    _Actual result:_ The page reloads with no indication as to why it reloaded.",8
"The \core\event\course_restored event is triggered on any restore, not just courses.
# Visit a course.  # Duplicate an activity.  # Notice there is a 'course restored' event.",5
"Backup and restore of logs in 2.7 and above
New logging API does not support backup and restore of logs",100
"Some forms with passwords and usernames get populated by the browser, which is not desired
When i tried to create a new group in a course, my username and password were pre-populated in the group id and the password for the group.  step 1: create group in a course  step 2: look at the pre-populated fields (group id and password) they are the same as my LDAP username and password.    I had a colleague log in on my machine with his credentials and my details were pre-populated.    When my colleague logged in on his machine his details were pre-populated    My thoughts are if they are pre-populating here then were else are they populating.    I have cleared cache. logged out then back in again    Regards  Brendan",20
"Neither formchangechecker, nor quiz autosave detects changes in Atto editors
Both quiz autosave code mod/quiz/yui/src/autosave/js/autosave.js, and lib/yui/src/formchangechecker/js/formchangechecker.js require special code to work with TinyMCE.    It seems that it they will alos need special code to work with Atto, but no-one has written that.    To reproduce (Quiz)  # (Optional) Add $CFG->forced_plugin_settings = array('quiz' => array('autosaveperiod' => 3)); to your config.php to make thes easier to test. (Just a 3 second delay between a change and an auto-save.)  # Ensure you have a default set-up using Atto, not TinyMCE or another editor.  # Create a quiz containing one essay question, that uses the 'HTML editor with file picker' response type.  # Attempt the quiz, and Open the console. (The autosave code outputs useful debug messages to tell you what is going on - assuming you have developer debug on.)  # Type something in Atto, and verify that 3 seconds later (or whatever delay you set) an autosave ajax request happens.  # Add an image to Atto using the filepicker, and verify that cause an autosave too.    To reproduce (Formchangechecker)  # Go to a form, and click to make a new post.  # Type an X in the message box.  # Click the back button. You should get a warning that you are about to leave a page with unsaved data, but you don't.",13
"Specify the requirements for the element library
This should be a dev docs page describing the element library tool, and describing how a developer would add a renderable/renderer method to the tool.     It should list the mandatory and optional features for this tool requires in order to meet the goals specified in: http://docs.moodle.org/dev/Render_library_specification#Element_library_and_style_guide",5
"Create the element library admin tool
Implement the admin tool defined in MDL-45827",8
"Define the initial list of renderables to be added to the element library
The proposed categories for renderables are:    Elements  Components (built of smaller elements)  Layouts (structured arrangements of smaller components/elements/layouts)    The names of these categories needs to be agreed on, and docs created to describe each category.     An (early) list of renderables is defined here: http://docs.moodle.org/dev/Render_library_specification#Initial_thoughts_on_renderables_and_what_we_should_provide_.28Draft.29    This list needs reviewing and categorising. ",20
"Define style guide for renderables
This document should go hand in hand with the element library, but will define best practices to follow when creating the default implementations of renderables.     See: http://docs.moodle.org/dev/Render_library_specification#Style_guide",40
"Debugging error when changing roles in category
I encountered the following message:  {code}  Inconsistent courseid - context combination detected.        line 247 of /lib/classes/event/base.php: call to debugging()      line 144 of /admin/roles/override.php: call to core\event\base::create()  {code}    to replicate -   # open course category,   # click on ""permissions"",   # select any role from ""Advanced"" dropdown  # Change any permission    I'll create a related improvement to trigger event from inside of assign_capability()",5
"Document renderer best practices
As part of the the [Render library specification|http://docs.moodle.org/dev/Render_library_specification] we agree that a best practices document was needed for the creation of renderers.    It should include:  * The do's and don't's of writing a render.  * A best practices for output.  * Any rules and recommendations in situations where elements cannot (or will not) be used.  ",20
"Define and document JavaScript output guide
As part of the the [Render library specification|http://docs.moodle.org/dev/Render_library_specification] we need to establish how the relationship between JavaScript and output should exist.    This involves deciding if handlebars is what we want to use, how we want to use it, how it ties in with renderers and elements, and then documenting the process thoroughly.    We should also consider here how to document elements and the JavaScript components that ship with them.  ",40
"Convert existing displays to renderers
This will make modifying the forum layout easier and clearer.  We will need to create a number of renderables, and it may be necessary to break this task down further to smaller areas of focus:  * posts;  * discussions;  * thread list; and  * other areas.",100
"Decide and document output components
This is an essential part of the task - unfortunately the approaches are broad and what we choose now we have to commit to and live with.  It has to meet our needs now and in the future.    Some of the things that need to factor into this decisions are:    *Element and component re-use*  Re-use is key to this approach. We want to have components containing existing elements and components, and when we want to change how an element looks we want that change reflected in all uses of the element within other components that don't require it to look different.  This way you can style a button and instantly have the look updated across other components like search forms containing buttons.    *Elements and components can be complex*  Elements don't need to be easy to write - they should be feature full and limited in number. Developers should not write components instead they should be re-using the available elements and components.    *Overriding a render to change how an element must be both easy and robust*  Re-use is key as per the above point.  However we need to achieve this in such a way that we don't introduce magic and keep things simple to understand and override.  We have to be able to deal with state and attribute requirements of the element in relation to its parent component and do it in such as way that the state is owned by the component and attributes are owner by the render method. and keep it all understandable.  ",40
"Developing a User Menu
Adding a User Menu, in the bootstrapbase themes; refer to the specification to know what it should contain, and how to implement it.    The general approach here is to refactor the existing navbar's capabilities, allowing it to support multiple dropdowns without adversely affecting existing DOM structure (which would necessitate every theme re-targeting its styles).    Update 10/06/2014: The user menu is being rendered fine, but the current solution doesn't quite encapsulate everything that'll need to happen with the navbar; in particular, page_heading_menu() stuff isn't handled by this solution as it doesn't really make sense for that stuff to live in a dropdown.    Update 24/06/2014: Okay, this turned out to be huge.    - The new {{user_menu}} renderable is an extension of the {{custom_menu}} renderable, constructed with references to a user, a course, a page and an array of flags (at present, the only thing that makes sense to set _a priori_ is {{guest}}, a boolean flag).  -- Basing the new renderable on the {{custom_menu}} allows for it to be easily displayed in Base-based themes as well.  -- A minor bug in {{custom_menu}}'s YUI3 dropdown code was fixed: in brief, the logic was looking for a dropdown attribute on the node that was clicked (e.target) instead of the node that the event was actually wired to (e.currentTarget).  - {{custom_menu}} renderables have been extended by way of MDL-46022 and have also gained the ability to assign CSS suffix flags to {{custom_menu_item}}s - which is necessary for us to avoid having to hardcode icons into the renderer PHP.  - In order to support multiple collapsible menus, it was necessary to create an entire {{bootstrap_navbar}} renderable which renders the {{body > header}} element and renders out a collection of menus. Bootstrap javascript has been patched to allow for multiple navbar items.  - Responsive styles have been provided.",100
"For students: a single page with all their course grades on it
Create a page wherein a student will be able to see the grades for the courses currently visible to them. This should be a user-context page, not under Reports, in order to avoid sudden breadcrumb/navigation jumping.    Once complete, a link to this page should be added to the *user menu*.",20
"Add more blocks to the default 'my home' page
Adding more content to *my home*. Refer to [the spec|http://docs.moodle.org/dev/Navigation_overhaul_specification#Revisiting_.27My_home.27_page_2] for more information.",13
"Event monitor: Finalise the basic file and database structure
Commit the basic file structure with the following:-  # Directory structure  # xmldb files  # permissions (db/access.php)",20
"Event monitor: Create a rule manager class with unit tests
Create a class report_monitor\rule_manager that lets you  # Create rules  # Edit rules  # Delete rules  # get rules  # Get rule  With unit tests",13
"Event monitor: Create a subscription manager class
Create a class report_monitor\subscription_manager that lets you  # Create subscriptions  # Delete subscriptions  # Get subscription  # Get subscriptions for course  # Get subscriptions for an event    With unit tests",20
"Define Report Builder API
Work in progress: http://docs.moodle.org/dev/reportbuilder/API    We need to define the API that will be used to define report sources. This will determine a large section of the work that needs to be done as we integrate the report builder into core moodle.",20
"Slow behat tests for backup
When we run behat backup tests, we pass a table such as:    {code}      When I backup ""Course 2"" course using this options:        | Filename | test_backup.mbz |        | setting_section_section_2_userinfo | 0 |        | setting_section_section_2_included | 0 |        | setting_section_section_4_userinfo | 0 |        | setting_section_section_4_included | 0 |  {code}    We then call i_backup_course_using_this_options, passing in those options. That in turn handles the backup process looking at each page.    At each page, it uses the following to fill in the form:  {code}  $this->fill_backup_restore_form($options);  {code}    Which then looks for each option in the table and fills it in. Since most of those settings are only found on one page, we then wait 12 seconds for the search for that option to fail to be found (which we ignore with a try/catch).    https://github.com/moodle/moodle/blob/master/backup/util/ui/tests/behat/behat_backup.php#L351    The result is that each test involving backups takes a good minute just to fill in the each page of the backup form, for three pages making about 3 minutes of wasted time in timeouts. By fixing this, we should be able to knock a good few minutes off behat runtimes.",5
"The auth/db plugin should use the core functions user_create_user and user_update_user
The auth/db is doing a bunch of it's own logic to add/update a user, which is not great. We want to keep the logic in one place for easy maintenance/updates etc.",8
"Event monitor: Create a form to edit/add a new rule
We need a form to add/edit a new rule. This issue includes:-  # The mform with proper validations and such  # Edit.php to handel forum submissions  # A yui module to update the select drop downs dynamically (consider creating a mform dependent select element instead? ) ",40
"Event monitor: Create rule class
We need a class that represents a rule in the database. It might have the following methods  get_module_select  delete_rule  copy_rule  get_plugin_name  get_description  get_name  get_filters_description  get_event_name  unsubscribe_user  subscribe_user    If it seems some of these methods can be reused by the subscription class, consider abstraction of those.  ",20
"Shibboleth contains misleading comment regarding user passwords
I was reading through the Shibboleth code and found this in auth/shibboleth/index.php near line 37    {code}  /// If we can find the Shibboleth attribute, save it in session and return to main login page      if (!empty($_SERVER[$pluginconfig->user_attribute])) {    // Shibboleth auto-login          $frm = new stdClass();          $frm->username = strtolower($_SERVER[$pluginconfig->user_attribute]);          $frm->password = substr(base64_encode($_SERVER[$pluginconfig->user_attribute]),0,8);          // The random password consists of the first 8 letters of the base 64 encoded user ID          // This password is never used unless the user account is converted to manual  {code}    The problem is that I don't believe Base64 is random at all and for short usernames could yield extremely short passwords. For instance the first 8 characters of the username 'ted' are 'dGVk'.     I am certainly no security expert but if a site for whatever reason decided to stop using Shibboleth anyone could stick a bunch of known usernames through Base64 and easily have the first 8 characters.     It seems like a bunch of randomized garbage characters would be a better idea to use. I really hope I am missing something here.",13
"Add ability to create dividers in custom_menu
As MDL-45893 is being developed based on custom_menu code, I think it'd be useful to have the ability to create dividers in regular custom_menus too. It is envisioned that you'd be able to specify dividers like this:    {noformat}  Moodle community|http://moodle.org  -Moodle free support|http://moodle.org/support  -####  -Moodle development|http://moodle.org/development  --Moodle Tracker|http://tracker.moodle.org  --Moodle Docs|http://docs.moodle.org  -Moodle News|http://moodle.org/news  ####  Moodle company  -Moodle commercial hosting|http://moodle.com/hosting  -Moodle commercial support|http://moodle.com/support  {noformat}    ...where a menu item with text of '####' and no URL will be given the class 'divider' at render time. I'd use the '-' character, but that'd conflict with our existing use of that to denote nesting level",3
"Survey activity shows wrong error message to admins
If you create a survey activity as an admin that is not enrolled in the course it says ""Guests are not allowed to submit surveys"". Admin != guest.",2
"Exception is thrown if you try to download responses from a survey activity with no responses
I suspect we should be handling there being no data to download in a more graceful way.    Create a survey activity, click on 'download results' and pick excel. The following is displayed.    {quote}  There are no answers for this survey yet.    More information about this error    Debug info:   Error code: cannotfindanswer  Stack trace:  line 463 of /lib/setuplib.php: moodle_exception thrown  line 138 of /mod/survey/download.php: call to print_error()  {quote}",5
"Include YUI -proxy modules in rollup
As raised in https://moodle.org/mod/forum/post.php?reply=1136723#mformforum, some ISPs do insane and antiquated blocking based on keyword. I suspect we'll see this in places such as Syria, Iran, China, North Korea, etc.    To help the users in those locations, we can include the proxy modules in the rollup such that they are no longer blocked and more (hopefully all) of the JS works.",3
"Editing LTI page invalid grade view
The LTI edit page loads the grade maximum points as a decimal number and then complains that it is not an integer when you try and save.",8
"Event monitor: Create a class to generate eventlist
Create a class to find and list all events with caching",13
"Event monitor: Create renderables/renderers to display the rule managment page
Write a renderer to display rule management interface.",20
"Event monitor: Create renderables/renderers to display the subscription managment page
Write a renderer to display subscription management interface.",40
"Problems in downloading course log files, only 30 lines are downloaded
Hi, we are using 2.7 an the Problem is, that trying to download log files only 30 rows are included in the download-file (exel, csv, xhtml ...). Talking about course-administration >> Reports >> Logs. Even without filtering anything, so that about 17 Pages of logdata are available online, a click on ""Download table Data as...excel/csv/xhtml..."" only results in 30 lines of logdata.  Think this is really a bug!?",5
"Event monitor: Handle creating/deleting subscriptions
Write a renderer to display subscription management interface.",13
"Event monitor: Handle rule managment
Write yui modules to handle the managment of rules  # Deleting a rule  # copying a rule",8
"Event monitor: Sort out navigation
We basically are going to provide three main entry points  # Subscription management page  # Rules management page    Sort out where these nodes needs to be present in the navigation    ",8
"Event monitor: Implement the event observer
Implement an event observer that populates tool_monitor_events, as needed",40
"Event monitor: Implement cron task to clean events table
Implement a cron task to clean tool_monitor_events periodically.    There are three ways do this:-  # Truncate the table unconditionally every x hours  # Implement a smart logic that reads various rules and finds which event entries are not useful any more and dumps them only.  # Implement a semi -smart logic which finds out the maximum ""timewindow"" used in rules and dumps every thing beyond that.    Imho, 1 is not acceptable, 2 seems ideal, 3 is easiest to implement and more performance friendly than 2.",20
"Event monitor: Implement cron task to send notifications
Implement a cron task to check if rule has happened or not and send notifications as required. This will also include creating a new message type.",13
"Add extra credit, drop-low/ keep-high, accurate weights and contribution column to User report
# calculate up each container’s (category or course items) adjusted weight percentage and grademax associated with the items adjusted (need this for weighting, so could be done here or after the next step)  # calculate points (must be first, you cannot calculate weights until you have the finalgrade and grademax for categories). For each gtree->levels starting with highest (items) to lowest (course) for both finalgrade and grademax  ## include hidden only if hidetotalsifcontainhiddenitems is set to GRADE_REPORT_SHOW_REAL_TOTAL_IF_CONTAINS_HIDDEN  ## ignore ungraded items if aggregateonlygraded is set, does not apply when calculating total points for Setup (Categories and items) screen  ## include extra credit items in finalgrade calculations only, not grademax  ## ignore items that have been dropped from drop low or keep high  ## accumulate all other finalgrades and grademaxes into parent category finalgrade and grademaxes  # calculate weights (must be done before calculating contributions). For each gtree->levels starting with highest (items) to lowest (course)  ## weight is always percentage grade * weight... in this case PERCENTAGE:[item grademax / (container grademax - adjusted grademax for the container from step 1)] * WEIGHT:[(100 - adjusted weight for the container from step 1)]  # Adjust weights in a container to always equal 100  # calculate contributions (needed in order to accurately drop lowest, keep highest. Also needed to provide the most percentages). For each gtree->levels starting with highest (items) to lowest (course)  ## contribution is always the item’s percentage * the item’s weight * the container’s weight… so (finalgrade / grademax) * item weight * container weight  # limit categories - drop lowest, keep highest (need to have contributions in order to accurately drop low and keep high)  ## remove contribs  ## remove finalgrades from parent finalgrade  ## remove maxgrade from parent maxgrade",40
"Gradebook terminology improvements
As defined by the Gradebook working group:    ""en"" pack:  # ""Aggregate Only Non-Empty Grades"" → ""Exclude empty grades""  # ""Categories & Items"" → ""Setup""  # ""Marks/Marking"" → ""Grades/Grading"" (whenever referring to gradebook stuff)     ""en_us"" pack:  # ""Marks → Points"" (for quiz)    Swap string:  # ""Update"" on grader report → ""Save changes""    New terms:  # ""Natural weighting""",8
"Usability improvements for grade export and import
Export  # Have a quickdump to csv that takes no parameters and can be optionally linked to the Grader report  -- Would contain a row of weights and a row of maximum points  -- Would contain a blank row after each category for teacher calculations  -- Add support for letter grades as well:  MDL-44447    Import  # Excel paste  -- Can import data via copy/paste from Excel (text field entry option, instead of file)  -- Saves trouble of saving file as csv and then importing  # CSV file preview (UCSB)  -- Not user friendly right now, but is resilient  -- Gives preview of parsed file input and allows mapping of data from file to Moodle fields  -- On submit, gives “preview�? and diagnosis data  --- Lets user know about “potential updates�?  --- Errors and tells user why (invalid student, invalid grade)  --- Duplicate scores are skipped  -- Then can continue with import  --- Moodle.org decided to only allow full/perfect imports, because importing of half data can leave user confused/lost  # Idea: Have data in a table and allow user to fix data right there.  ",100
"Develop new Gradebook history report
# take the netspot grade history module and integrate  # extend the netspot module, and provide functionality to find editing periods, and then provide a diff report from a specific period in time with current.",100
"Alt image in footer is incorrectly repeated
According to [this example|http://www.w3.org/TR/WCAG20-TECHS/H2#H2-failex5], alt attribute of footer's image should be empty instead of be repeated twice (on image's alt attribute and p tag text).    But maybe this image should be displayed via css ?    *Replication steps:*  # Log in to a course  # Inspect the HTML on the icon in the docs link at the bottom of the page",5
"Disabled functionality checks occur later than necessary
While scouting around I noticed that /notes/edit.php and /notes/delete.php both include this check...  {code}  if (empty($CFG->enablenotes)) {      print_error('notesdisabled', 'notes');  }  {code}  but it occurs quite a way down the file after the $PAGE is set up, the user is loaded, the course is loaded and capability checks are performed. The check could be done much earlier to save us some cycles.    There are likely to be other places where this is also true so have a look around.",5
"Event monitor: Create a subscription instance class
Create a class that represents a subscription instance",5
"Backport of MDL-42869: HTML validation check fails on calendar add event screen
Backporting this issue would allow us to apply the fix for MDL-46197 to 2.6.",3
"Add-on validation message always shows ""foundlangfile"" (Debug)
Debug message can be confusing to most users.    When installing a plugin/module through Moodle interface , Add-on Package validation page display Message ""foundlangfile"" with status 'Debug'.  It looks like as if something is wrong.    File : /admin/tool/installaddon/classes/validator.php  Line : 397  Incorrect : $this->add_message(self::DEBUG, 'foundlangfile', $this->langfilename);  Correct : $this->add_message(self::OK, 'foundlangfile', $this->langfilename);    I am not sure if setting it to DEBUG is done for a reason.",3
"Purge all caches page did not call $PAGE->set_url(...) (Moodle 2.8)
This page did not call $PAGE->set_url(...). Using http://localhost/moodle28/admin/purgecaches.php?confirm=1&sesskey=ZjULBqAVg1        line 560 of \lib\pagelib.php: call to debugging()      line 768 of \lib\pagelib.php: call to moodle_page->magic_get_url()      line 3419 of \lib\navigationlib.php: call to moodle_page->__get()      line 719 of \lib\pagelib.php: call to settings_navigation->initialise()      line 768 of \lib\pagelib.php: call to moodle_page->magic_get_settingsnav()      line 3086 of \lib\navigationlib.php: call to moodle_page->__get()      line 824 of \lib\pagelib.php: call to navbar->has_items()      line 26 of \theme\tiny\layout\default.php: call to moodle_page->has_navbar()      line 908 of \lib\outputrenderers.php: call to include()      line 838 of \lib\outputrenderers.php: call to core_renderer->render_page_layout()      line 285 of \theme\tiny\renderers.php: call to core_renderer->header()      line ? of unknownfile: call to theme_tiny_core_renderer->redirect_message()      line 1639 of \lib\setuplib.php: call to call_user_func_array()      line 2592 of \lib\weblib.php: call to bootstrap_renderer->__call()      line 2592 of \lib\weblib.php: call to bootstrap_renderer->redirect_message()      line 44 of \admin\purgecaches.php: call to redirect()",5
"Convert http embedded content to https on https sites where available
This could be a once off thing (e.g. when someone changes from http to https and back) or a constant thing (whenever they add a link)    Note that apache server can be configured to choose http or https automatically, and other servers may have similar functionality.    The protocol relative url option can be considered as well. ""//www.example.com"" will link to https://www.example.com if you are on https://moodle.org or http://www.example.com if you are on http://moodle.org    Finally, a filter could be made.",100
"Option to hide user_picture from screen readers
There is at present no way to emit a user_picture that isn't visible to screen readers. It is envisaged that this could be achieved by adding a flag to the renderable, {{visibletoscreenreaders}}, defaulting to true; when set to false, the renderable should be rendered with appropriate attributes.    Default behaviour is backwards compatible; all current user_pictures are visible to screen readers, so the {{visibletoscreenreaders}} flag defaults to *true* to emulate this. Setting the flag to *false* adds attributes to both the {{img}} and {{a}} tags to hide them from screen readers.",3
"Create new icons for e-mail subscription status
The current icons for e-mail subscription state are too subtle.  Go work your creative magic and bring us something beautiful and inspiring, but where you can see at a glance the differences in your subscription state.",8
"Fix coding style problems in notes
code checker currently reports 50 errors and 103 warnings just in notes.",5
"coding style problems in blog
Originally noted in MDL-46218. There are lots of coding style issues in blog.",5
"Deprecate print_group_picture
To support ongoing forum work (MDL-45862), {{print_group_picture}} is being deprecated in favour of a helper + renderable + renderer solution in the output library.",5
"Use cohorts to restrict display of course categories and set themes
Problem: some Moodle users, such as large organisations with many departments, would like to have one Moodle but set it up so that each user only sees the courses from their own department, and with a theme that matches their department.    A simple solution:    Use cohorts to represent the departments, and allow each cohort to be mapped to one course category and one theme.    Then, once a user has logged in, we know which cohorts they are in, and this which categories they are allowed in, and then we restrict the entire course tree to just show those categories (and anything inside them).  If there is just one category then we could further refine this by leaving out the name of the category and putting the contents of it at the top level.    There don't have to be any further changes in enrolments, and if the user is also enrolled in any courses outside this category then these courses will simply appear in the list of My courses at the top level.    Additionally, if they are in just ONE cohort (or all their cohorts have the same theme) we also set the theme to match (this cohort theme setting overrides all other theme settings).    (Thanks to Andrea Bicciolo at Mediatouch for the idea - he estimated it would be suitable for 80% of his clients who want ""multi-tenancy"" in Moodle)",100
"Event monitor: Consolidate and increase unit tests for the tool
A number of Behat and phpUnit tests have already been incorporated into Event Monitor. This issue is to review the existing unit tests and to add additional tests for greater coverage.",40
"Event monitor: Implement a notification sent history report
Write a page to display a report of notifications sent",40
"Re-introduce backup/restore functionality with new logging system
Currently the new logging stores do not support backup/restore. This is critical information, especially if we plan on using it more and more, so the functionality should exist. We are removing the usage of the legacy logs, and only have the legacy log store for BC, so new sites won't be backing up/restoring any logging information.",100
"jquery ui css issue
In using Moodle 2.6's jquery ui css that comes with standard Moodle, I found a bug with the urls included in the css.      The normal jquery-ui.css file contains the correct paths, but the minified version does not.  It contains extra path information on all of the image urls:    ../../../../../../../../Downloads/jquery-ui-1.10.3/themes/base/minified/    These should just be removed to be left with the relative path to the images folder.  This problem doesn't exist in the master branch with the upgrade to jquery ui 1.10.4",3
"Event monitor: Delete rules when course is deleted
We need an observer to delete rules and subscriptions when a course is deleted",8
"Add body class when logged in as other role
To support work being done on MDL-45893, we need a way of telling at the DOM level when a user is viewing as another role. We already have a class added to the body telling us when we're logged in as another user; this should be fairly straightforward.",3
"CSV import of grades silently fails when malformed row(s) present
If the number of columns in any data row don’t match the columns in the header row, there is no diagnostic warning, AND the ability to map from the select box in the “identify user by"" section is broken.",13
"Copy and paste import from excel into the gradebook.
It would be convenient to just copy and paste rows from excel straight into the gradebook. This could be added to the csv import form.",100
"Improved interface for export of grades
Add the ability to dump grade data to CSV *without* selecting parameters, optionally linked to the grader report.    The solution should:  * contain a row of weights and a row of maximum points  * contain a blank row after each category for teacher calculations  * have support for letter grades as well (see MDL-44447)",20
"Robust previewing + update dry running for importing grade CSVs
Integrate UCSB's CSV file preview functionality - gives preview of parsed file input and allows mapping of data from file to Moodle fields. When submitted, it provides diagnosis data about:  * ""potential updates"", i.e. when importing a CSV will change existing grades  * errors and underlying reasons  It should also skip duplicate scores.    Further detail - these are the strings being introduced for further detail:    * '{$a->name} not found in system mapped to {$a->key}'  * 'student {$a->name} not found in group {$a->key}'  * 'invalid grade for {$a}'  * 'missing grade for {$a}'  * 'invalid scale value for {$a}'  * 'invalid grade value for {$a}'  * 'grade exceeds item max ({$a->name}) for {$a->key}'  * 'duplicate grade for {$a->name} from {$a->key} to {$a->key2}'  * 'changing grade for {$a->name} from {$a->key} to {$a->key2}'  * 'adding grade for {$a->name} as {$a->key}'  * 'Warning: Accepted grade exceeds Item Maximum'  * 'Error: Grade exceeds Item Maximum'  * 'Error: Grade score bypassed - Locked grade'  * 'Error: Grade score bypassed - No grade'  * 'Error: Grade score bypassed - Invalid grade'  * 'Error: Grade score bypassed - Invalid group'  * 'Error: Grade score bypassed - Invalid student'  * 'Warning: Grade score bypassed - Duplicate score skipped'    Other messages    * likely used the wrong delimiter  * Non numeric grade value supplied, possibly mapped wrong column.  ",40
"Clone and integrate NetSpot's gradehistory report
- Pull the module in, keep git history  - Remove README file  - Add the missing copyrights and file headers  - Complete the PHP docs  - Fix the coding style  - Make sure all terms comply with MDL-46175    https://github.com/netspotau/moodle-gradereport_history",8
"Clean up the history report
- Removing unnecessary or unused methods  - Removing the language strings static cache  - Check the module for security issues (privacy, unauthorised access, ...)",8
"Migrate the history report to use table_sql
- Migrate the table to a table_sql  -- Enable and check the column sorting  -- Enable and check the collapsible columns  - Implement autoloading of the different classes  - Use the download feature, rather than the export button  - Reconsider the columns (which ones to display, what order to use)  - Make the name of the grader, graded users and grade item clickable  -- Grader and graded go to their profile  -- Grade item could go somewhere, maybe...  - Do not capitalise the source column values  - Page navigation should not be displayed above the filter form",40
"Convert gradebook javascript to a YUI module
- Convert the YUI code into a shifter compatible module  - Move ajax.php logic into a class, or another location  ",40
"Write Unit Tests for the history report
Write Unit Tests to ensure that the queries are returning the expected result.",20
"Write a simple behat test for the history report
Write a simple behat test for the history report.    {quote}  As a teacher, I can see the grade history of a grade I just gave to a student  {quote}  ",13
"Improve the SQL queries of the history report
- Fix the query not to be based on ID, but timestamps  -- With unit tests confirming  - Ensure that the queries include alternate name fields  - Ensure the queries are cross DB",13
"Add the event grade_report_viewed for the history report
Create and use a new event \gradereport_history\event\grade_report_viewed.",13
"Implement Natural aggregation
* Include upgrade code to add new database columns  * May involve fixing some existing unit and behat tests.  * -Must have no errors or warnings in code checker-",100
"Restructure Unit tests for gradebook aggregation, include natural weight
Some tests will need to be added, based these on the [""Calculation examples"" section in the spec|http://docs.moodle.org/dev/Natural_weighting#Calculation_examples]. These should be written very early to prove the state of the code. Also the items under [""Logic changes"" should be covered|http://docs.moodle.org/dev/Natural_weighting#Logic_changes]. In particular ""Sum of Grades aggregation must be fixed to exclude hidden items and to exclude non-graded items"" and ""Determination of range (in Grader and User report) and Max grade (in Setup screen) must be fixed to exclude extra credit items"". For developers who are unclear on how this new functionality works, the new unit tests should be there to explain in detail what is going on.    vendor/bin/phpunit --testsuite core_grade_testsuite    Relevant tests that will need to be looked at and upgraded:  * lib/grade/tests  * grade/tests  * grade/grading/tests",40
"Make Natural aggregation the (single) default aggregation method
Currently there are a number of aggregation methods. The new ""Natural"" aggregation method can cover most of the functionality of all existing aggregation methods.    On new installs, this should be set as the default aggregation method.    It is also possible to hide the other aggregation methods by setting it as the single selected aggregation method at the site level.    Settings for both are defined at Site admin > Grades > Grade category settings.    If there is only one aggregation method available, then aggregation controls should be hidden in the gradebook setup pages and wherever aggregations are named.",8
"Add behat tests
Base these on the [""Calculation examples"" section in the spec|http://docs.moodle.org/dev/Natural_weighting#Calculation_examples]. These should be written very early to prove the state of the code. Also the items under [""Logic changes"" should be covered|http://docs.moodle.org/dev/Natural_weighting#Logic_changes]. In particular ""Sum of Grades aggregation must be fixed to exclude hidden items and to exclude non-graded items"" and ""Determination of range (in Grader and User report) and Max grade (in Setup screen) must be fixed to exclude extra credit items"".    Write new behat tests for the new UI.",40
"Locked grade items don't update on grade import
If a score for a student for a gradeitem that is being updated via import is locked, the entire set of scores being imported do not update, yet there is no message to that effect. The only current message is a notification of “Grade is locked�?.    Problem - If a score for a student for a gradeitem that is being updated via import is locked, the entire  set of scores being imported do not update, yet there is no message to that effect. The only current message  is a notification of “Grade is locked�?.  Level - Major  Fix Proposed - 1 line of code modified with better error message (or a 2nd line with additional message)  Solutions Proposed (S1) - print different error message (please note, the text would go into a string)  Extended solution (S2)- print at least the line that had the mismatch, possibly process entire file and list all.    To reproduce:  # turn editing on, in the grader report, for a manual grade item,  # lock a single students score. turn editing off.  # Now import data into the gradebook  # for that grade item, ensure you have that one student in your list  You will see that *NO* grades are updated. ",13
"Robust handling of bad grade import data
If data in a column being imported has a bad value, like a letter “A�?,  the import can fail in two different ways.  If the instructor maps the column in the data to an existing grade item, we just need better diagnostic message.  IF the instructor maps the column to a “NEW GRADE ITEM�?, the import fails with a database error.",13
"Importing null grade data clears existing grades
If an instructor has a data file, that has null scores for students,  and the instructor imports that file, any existing scores will be cleared with  those null scores.    *Example real-world scenario*: when there are large classes, with multiple graders, who only grade a subset of the students.  Each grader may only enter scores for their students, and have nulls for all the others.",40
"Import fails if grade import data contains nonexistent user
When matching all the data records in the file, mapping the user, if there is even one record which can’t be matched in Moodle, the entire import fails. There is adequate diagnostic, displaying the first user it couldn’t find, but doesn’t tell the instructor no data was imported.",13
"Write specification for improvements to scales. 
We need to get some agreement on the solution for MDL-17258 - so we need to properly specify the proposed solution.     Spec: http://docs.moodle.org/dev/Scales_Improvements_Specifications",20
"Improve grade_scale class to support mapping to/from points and menu generation.
The way scales are implemented currently (Moodle 2.7) is that the activity modules each re-implement the logic of retrieving a list of scale items for a given scale and creating a menu from it. The chosen item is then pushed to the gradebook via the ""grade_update"" method where the grade_item in the gradebook identifies the scale in use. It would be much better if there was a single function responsible for creating a form element that represents a scale. There are other bits of scales logic hard coded in modules such as getting the min and max for a scale, converting a scale item to a points value, getting a list of scale items, getting a normalized grade from a scale item and getting the closest scale item to a value specified in points.    We should extend grade_scale from the ""grade"" api to encapsulate all this logic.    This API needs unit tests.",20
"Allow custom mappings of scale items -> points
An extra column will need to the added to the scales table to (optionally) store a mapping of scale items to points.    This column will need to be used when converting a raw scale item to a normalised, bounded value for the gradebook finalgrade. (see grade_item::bounded_grade).    A ""nice"" ui needs to be made to edit these mappings.     These custom mappings need unit tests.",20
"Remove custom scales logic from modules.
Modules need to replace their manual scales logic with some calls to the scales (grade) API. Very few modules actually directly use scales.  ",8
"Review use of scales in workshop.
Workshop has custom scales logic for calculating the average of several scales. This should be replaces with an API call. This logic converts scale items to a 0 based index before calculating the average - the reason for this this needs to be understood before we decide how it is to be handled.",13
"Update advanced grading methods to support new scales mapping.
1. New method will be added to controller to specify particular scale used in the module.    2. Function get_grade() in advanced grading plugins must be amended to correctly map the grade to an item in a scale.    3. Modules supporting Advanced grading (only mod_assign atm) should tell about the scale used to the advanced grading controller (see below)",20
"Add an admin setting to make the use of a particular scale the ""default"" for all grading things (gradebook columns, activities etc).
Wherever print_grade_menu is used (or the equivalent of it). ",5
"Create an easy way to configure grade letters matching an existing scale. 
This would be a convenience when you want to sometimes use scales for grading and sometimes points, but you always want the result in letters (and vice-versa?).",13
"Optimise grader report
Whilst playing with some larger datasets on MDL-25544, I noticed that things were a lot slower than I would expect, so I did some profiling.    The profiling pulled up some easy-to-address things which can knock off a sub off the page load. These are things like:  * unnecessary use of html_writer in a loop;  * repeat calls to fetch gradebook user preferences without caching  * repeated calls to get_string for the same static string",8
"The user selector search does not respect the parameters passed
When using the user selector and loading users (while searching, or clicking ""Next 25""), the query ignores the values:    - Users per page  - Page number    Therefore returning more users than expected, and returning the same than the ones already present when fetching more of them.    This is blocked by MDL-46569, due to the transition to table_sql, because the callbacks/structure/... are changing.",8
"Prepare and integrate grader code from UCLA
UCLA have submitted some code for an updated view of the gradebook and it looks that we may accept this into core.    It still needs a little bit of work as part of this issue including:  * Merge existing commits where relevant  * Update to meet coding style guidelines (Primarily JS)  * Move hardcoded styles to css  * Check SASS and produce a definitive CSS/Less set (as appropriate) and remove SASS files again    There may be more...",100
"Add dynamic loading of content
This will likely require:  * the removal of existing pagination (JS only?)  * changing the model for existing content  * keeping track of the fields already loaded    When writing this, we need to also consider the related functionality (but this probably needs to come first):  * dynamic searching  * dynamic sorting",40
